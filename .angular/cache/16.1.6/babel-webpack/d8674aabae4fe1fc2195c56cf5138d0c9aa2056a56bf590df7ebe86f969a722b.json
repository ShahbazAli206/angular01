{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let ProductListComponent = class ProductListComponent {\n  constructor(route, dataService, http, localStorageService) {\n    this.route = route;\n    this.dataService = dataService;\n    this.http = http;\n    this.localStorageService = localStorageService;\n    this.products = [];\n    this.displayedCards = [];\n    this.currentPage = 1;\n    this.pageSize = 4;\n  }\n  onCardClick(card) {\n    this.localStorageService.addCard(card);\n  }\n  onClearLocalStorageClick() {\n    this.localStorageService.clearStoredCards();\n  }\n  ngOnInit() {\n    this.route.params.subscribe(params => {\n      this.cardId = +params['id'];\n    });\n    this.fetchproducts();\n    this.updateDisplayedCards();\n  }\n  showNextPage() {\n    this.currentPage++;\n    this.updateDisplayedCards();\n  }\n  get hasNextPage() {\n    return this.currentPage * this.pageSize < this.products.length;\n  }\n  updateDisplayedCards() {\n    const startIndex = (this.currentPage - 1) * this.pageSize;\n    const endIndex = startIndex + this.pageSize;\n    this.displayedCards = this.products.slice(startIndex, endIndex);\n  }\n  fetchproducts() {\n    console.log('the clicked category id is : ', this.cardId); // Now you can access the cardId here\n    this.dataService.getProducts(this.cardId).subscribe(data => {\n      this.products = data;\n    }, error => {\n      console.error('Error fetching data:', error);\n    });\n    // let params = new HttpParams().set('cardId', this.cardId.toString());\n    // this.http.get<any>('http://127.0.0.1:8000/api/products_angular', { params }).pipe(\n    //   map((data) => {\n    //     return data.map((card: Card) => ({\n    //       ...card,\n    //       imageUrl: 'http://127.0.0.1:8000/storage/' + card.image\n    //     }));\n    //   })\n    // ).subscribe(\n    //   (data) => {\n    //     this.products = data; \n    //     console.log('Items:', this.products); \n    //   },\n    //   (error) => {\n    //     console.error('Error fetching data from API:', error);\n    //   }\n    // );\n  }\n};\n\nProductListComponent = __decorate([Component({\n  selector: 'app-product-list',\n  templateUrl: './product-list.component.html',\n  styleUrls: ['./product-list.component.css']\n})], ProductListComponent);","map":{"version":3,"names":["Component","ProductListComponent","constructor","route","dataService","http","localStorageService","products","displayedCards","currentPage","pageSize","onCardClick","card","addCard","onClearLocalStorageClick","clearStoredCards","ngOnInit","params","subscribe","cardId","fetchproducts","updateDisplayedCards","showNextPage","hasNextPage","length","startIndex","endIndex","slice","console","log","getProducts","data","error","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\Laptop Wala\\Desktop\\Anguler Projects\\myApp\\src\\app\\components\\product-list\\product-list.component.ts"],"sourcesContent":["import { Component , OnInit } from '@angular/core';\nimport { HttpClient, HttpParams  } from '@angular/common/http';\nimport { map } from 'rxjs/operators';\nimport { LocalStorageService } from '../../services/local-storage-service.service';\nimport { ActivatedRoute } from '@angular/router';\nimport { ProductsService } from 'src/app/services/products.service';\n\n\ninterface Card {\n  id: number;\n  name: string;\n  image: string;\n  // Add other properties as needed\n}\n@Component({\n  selector: 'app-product-list',\n  templateUrl: './product-list.component.html',\n  styleUrls: ['./product-list.component.css']\n})\nexport class ProductListComponent implements OnInit {\n\n  products: any[] = [];\n  displayedCards: any[] = [];\n  currentPage = 1;\n  pageSize = 4;\n\n\n\n  private cardId!: number; \n  constructor(private route: ActivatedRoute, private dataService: ProductsService, private http: HttpClient, private localStorageService: LocalStorageService) {}\n \n \n  onCardClick(card: any) {\n    this.localStorageService.addCard(card);\n  }\n \n  onClearLocalStorageClick() {\n    this.localStorageService.clearStoredCards();\n  }\n\n\n  \n  ngOnInit(): void {\n    this.route.params.subscribe(params => {\n    this.cardId = +params['id'];\n    });\n    this.fetchproducts();\n    this.updateDisplayedCards();\n\n  }\n\n  showNextPage() {\n    this.currentPage++;\n    this.updateDisplayedCards();\n  }\n\n  get hasNextPage() {\n    return (this.currentPage * this.pageSize) < this.products.length;\n  }\n\n  updateDisplayedCards() {\n    const startIndex = (this.currentPage - 1) * this.pageSize;\n    const endIndex = startIndex + this.pageSize;\n    this.displayedCards = this.products.slice(startIndex, endIndex);\n  }\n  fetchproducts(): void {\n    console.log('the clicked category id is : ', this.cardId); // Now you can access the cardId here\n   \n   \n    this.dataService.getProducts(this.cardId).subscribe(\n      (data) => {\n        this.products = data;\n      },\n      (error) => {\n        console.error('Error fetching data:', error);\n      }\n    );\n    \n    // let params = new HttpParams().set('cardId', this.cardId.toString());\n\n    // this.http.get<any>('http://127.0.0.1:8000/api/products_angular', { params }).pipe(\n    //   map((data) => {\n    //     return data.map((card: Card) => ({\n    //       ...card,\n    //       imageUrl: 'http://127.0.0.1:8000/storage/' + card.image\n    //     }));\n    //   })\n    // ).subscribe(\n    //   (data) => {\n    //     this.products = data; \n    //     console.log('Items:', this.products); \n\n    //   },\n    //   (error) => {\n    //     console.error('Error fetching data from API:', error);\n    //   }\n    // );\n\n\n  }\n\n}\n"],"mappings":";AAAA,SAASA,SAAS,QAAiB,eAAe;AAmB3C,WAAMC,oBAAoB,GAA1B,MAAMA,oBAAoB;EAU/BC,YAAoBC,KAAqB,EAAUC,WAA4B,EAAUC,IAAgB,EAAUC,mBAAwC;IAAvI,KAAAH,KAAK,GAALA,KAAK;IAA0B,KAAAC,WAAW,GAAXA,WAAW;IAA2B,KAAAC,IAAI,GAAJA,IAAI;IAAsB,KAAAC,mBAAmB,GAAnBA,mBAAmB;IARtI,KAAAC,QAAQ,GAAU,EAAE;IACpB,KAAAC,cAAc,GAAU,EAAE;IAC1B,KAAAC,WAAW,GAAG,CAAC;IACf,KAAAC,QAAQ,GAAG,CAAC;EAKkJ;EAG9JC,WAAWA,CAACC,IAAS;IACnB,IAAI,CAACN,mBAAmB,CAACO,OAAO,CAACD,IAAI,CAAC;EACxC;EAEAE,wBAAwBA,CAAA;IACtB,IAAI,CAACR,mBAAmB,CAACS,gBAAgB,EAAE;EAC7C;EAIAC,QAAQA,CAAA;IACN,IAAI,CAACb,KAAK,CAACc,MAAM,CAACC,SAAS,CAACD,MAAM,IAAG;MACrC,IAAI,CAACE,MAAM,GAAG,CAACF,MAAM,CAAC,IAAI,CAAC;IAC3B,CAAC,CAAC;IACF,IAAI,CAACG,aAAa,EAAE;IACpB,IAAI,CAACC,oBAAoB,EAAE;EAE7B;EAEAC,YAAYA,CAAA;IACV,IAAI,CAACb,WAAW,EAAE;IAClB,IAAI,CAACY,oBAAoB,EAAE;EAC7B;EAEA,IAAIE,WAAWA,CAAA;IACb,OAAQ,IAAI,CAACd,WAAW,GAAG,IAAI,CAACC,QAAQ,GAAI,IAAI,CAACH,QAAQ,CAACiB,MAAM;EAClE;EAEAH,oBAAoBA,CAAA;IAClB,MAAMI,UAAU,GAAG,CAAC,IAAI,CAAChB,WAAW,GAAG,CAAC,IAAI,IAAI,CAACC,QAAQ;IACzD,MAAMgB,QAAQ,GAAGD,UAAU,GAAG,IAAI,CAACf,QAAQ;IAC3C,IAAI,CAACF,cAAc,GAAG,IAAI,CAACD,QAAQ,CAACoB,KAAK,CAACF,UAAU,EAAEC,QAAQ,CAAC;EACjE;EACAN,aAAaA,CAAA;IACXQ,OAAO,CAACC,GAAG,CAAC,+BAA+B,EAAE,IAAI,CAACV,MAAM,CAAC,CAAC,CAAC;IAG3D,IAAI,CAACf,WAAW,CAAC0B,WAAW,CAAC,IAAI,CAACX,MAAM,CAAC,CAACD,SAAS,CAChDa,IAAI,IAAI;MACP,IAAI,CAACxB,QAAQ,GAAGwB,IAAI;IACtB,CAAC,EACAC,KAAK,IAAI;MACRJ,OAAO,CAACI,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAC9C,CAAC,CACF;IAED;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;EAGF;CAED;;AAlFY/B,oBAAoB,GAAAgC,UAAA,EALhCjC,SAAS,CAAC;EACTkC,QAAQ,EAAE,kBAAkB;EAC5BC,WAAW,EAAE,+BAA+B;EAC5CC,SAAS,EAAE,CAAC,8BAA8B;CAC3C,CAAC,C,EACWnC,oBAAoB,CAkFhC"},"metadata":{},"sourceType":"module","externalDependencies":[]}